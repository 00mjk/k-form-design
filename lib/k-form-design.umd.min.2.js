(("undefined"!==typeof self?self:this)["webpackJsonpk_form_design"]=("undefined"!==typeof self?self:this)["webpackJsonpk_form_design"]||[]).push([[2],{"0574":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:{width:e.record.options.width}},[e.record.options.drag?i("a-upload-dragger",{attrs:{disabled:e.record.options.disabled,name:e.record.model,multiple:e.record.options.multiple,fileList:e.fileList,data:e.optionsData,action:e.record.options.action,remove:e.remove,beforeUpload:e.beforeUpload},on:{preview:e.handlePreview,change:e.handleChange}},[i("p",{staticClass:"ant-upload-drag-icon"},[i("a-icon",{attrs:{type:"cloud-upload"}})],1),i("p",{staticClass:"ant-upload-text"},[e._v("单击或拖动文件到此区域")])]):i("a-upload",{attrs:{disabled:e.record.options.disabled,name:e.record.model,multiple:e.record.options.multiple,data:e.optionsData,fileList:e.fileList,action:e.record.options.action,remove:e.remove,beforeUpload:e.beforeUpload},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<e.record.options.limit?i("a-button",{attrs:{disabled:e.record.options.disabled}},[i("a-icon",{attrs:{type:"upload"}}),e._v(" "+e._s(e.record.options.placeholder)+"\n    ")],1):e._e()],1)],1)},a=[],n=(i("7f7f"),{props:["record","value"],data:function(){return{fileList:[]}},watch:{value:function(e){this.fileList=e}},computed:{optionsData:function(){try{return JSON.parse(this.record.options.data)}catch(e){return{}}}},methods:{handleSelectChange:function(){var e=this;setTimeout(function(){var t=e.fileList.map(function(e){if("undefined"!==typeof e.response){var t=e.response;return{name:e.name,status:e.status,uid:t.data.fileId||(new Date).getTime(),url:t.data.url||""}}return{name:e.name,status:e.status,uid:e.uid,url:e.url||""}});e.$emit("change",t),e.$emit("input",t)},10)},handlePreview:function(e){var t=document.createElement("a");t.href=e.url||e.thumbUrl,t.download=e.name,t.click()},remove:function(){this.handleSelectChange()},beforeUpload:function(e,t){t.length+this.fileList.length>this.record.options.limit&&(this.$message.warning("最大上传数量为".concat(this.record.options.limit)),t.splice(this.record.options.limit-this.fileList.length))},handleChange:function(e){if(this.fileList=e.fileList,"done"===e.file.status){var t=e.file.response;0===t.code?this.handleSelectChange():(this.fileList.pop(),this.$message.error("文件上传失败"))}else"error"===e.file.status&&this.$message.error("文件上传失败")}}}),s=n,r=i("2877"),l=Object(r["a"])(s,o,a,!1,null,null,null),d=l.exports;t["default"]=d}}]);